dependencies:
  pre:
    - wget http://gnu.opencube.ca/emacs/emacs-24.5.tar.xz
    - cd emacs-24.5 && ./configure && make && sudo make install && cd ..
    - wget https://github.com/jgm/pandoc/releases/download/1.13.2/pandoc-1.13.2-1-amd64.deb
    - sudo dpkg -i pandoc-1.13.2-1-amd64.deb
    - curl -fsSL https://raw.githubusercontent.com/cask/cask/master/go | python
    - export PATH="/usr/local/bin:$HOME/.cask/bin:$PATH"
    - cask install
  cache_directories:
    - pandoc-1.13.2-1-amd64.deb
    - .cask
    - emacs-24.5.tar.xz
    - emacs-24.5/src/emacs
test:
  pre:
    - ./preserve_timestamp.sh
    - ./import.sh
    - ./ci-publish.sh
deployment:
  production:
    branch: master
    commands:
      - ./ci-push.sh